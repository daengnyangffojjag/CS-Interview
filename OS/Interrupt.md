### 인터럽트

> 프로그램 실행 중 문제가 생겼을 때, 실행 중인 프로그램을 중단하고 CPU에 처리를 요청하는 메커니즘
> 
- 입출력 하드웨어 등의 장치에 이상이 생겼을 때 CPU에게 알림
- 우선적으로 처리해야할 일이 생겼을 때 그것을 처리하고 원래 동작으로 돌아옴

### 인터럽트의 유형

1. **하드웨어 인터럽트**

**하드웨어 장치**와 관련된 이벤트로 인터럽트를 발생시킴

- 주변 장치와의 상호 작용, 데이터 전송, 오류 발생과 관련
- 외부 인터럽트(주로 입출력 장치), 타이머 인터럽트, 하드웨어 오류 인터럽트 등이 있음
    - **외부 인터럽트**
        - **입출력 장치**와의 상호작용과 관련
        - 키보드 입력, 마우스 동작, 네트워크 데이터 수신 등에 해당
    - **타이머 인터럽트**
        - 미리 **정의된 시간 간격**에 따른 인터럽트
        - 실행 중인 프로세스를 중단하고 다음에 실행할 프로세스를 선택
        - 시스템 상태를 갱신하는데 사용
    - **하드웨어 오류 인터럽트**
        - **하드웨어 장치에서 발생하는 오류**를 감지하고 처리하긴 위한 인터럽트
        - 하드웨어 장치의 예상하지 못한 동작, 데이터 전송 오류 등과 관련
        - 디스크의 읽기/쓰기 오류, 메모리 오류, 그래픽 카드 오류
1. **소프트웨어 인터럽트**

**소프트웨어 명령(코드)**에 의해 인터럽트를 발생시킴

- 주로 프로그램 내에서 호출되는 인터럽트
- 운영체제의 시스템 호출, 예외처리에 사용
    - **시스템 호출**
        - 운영체제의 기능을 활용
        - 파일 입출력, 메모리 할당, 네트워크 통신 등을 요청
        - 시스템 호출 인터페이스를 사용해 운영체제는 해당 요청을 처리
    - **예외 처리**
        - 프로그램 실행 중 발생하는 예외적인 상황에 대한 처리
        - 0으로 나누기, 잘못된 명령어 실행 등

### 인터럽트 발생 과정

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2980ee20-8319-455a-8030-4e803c3647db/Untitled.png)

1. 인터럽트 발생
2. 현재 작업 중단 및 PCB 저장
- CPU가 현재 실행 중인 프로세스 중단
- PCB(**Process Control Block)에** 해당 프로세스의 정보 저장

<aside>
💡 PCB?

</aside>

*인터렙트 발생 시 해당 프로그램의 어느 부분이 실행 중이었는지 저장*

1. **ISR(Interrupt Service Routine)** 실행
- CPU는 인터럽트 서비스 루틴(ISR)으로 전환
- CPU는 인터럽트 벡터 테이블을 참조하여 해당 인터럽트의 ISR 주소 확인
- ISR 실행

<aside>
💡 ISR?

</aside>

*인터럽트에 대한 처리를 담당하는 코드 또는 함수*

1. 인터럽트 종료 및 복구
- ISR의 실행이 완료되고 CPU는 중단된 작업을 재개
- CPU는 이전 프로세스의 PCB를 로드하여 해당 프로세스 복원 및 재개

### 인터럽트 우선순위

전원 이상 > 기계 착오 > 외부 신호 > 입출력 > 명령어 오류 > 프로그램 검사 > SVC

- 일반적으로 하드웨어 인터럽트가 소프트웨어 인터럽트보다 우선순위가 높음

### 우선순위 판별 방법

1. **소프트웨어적인 방식 - 폴링(Polling)**
- 각 인터럽트 마다 플래그를 두고, 플래그의 상태를 확인
- 인터럽트 요청 플래그를 비교하여 우선순위가 가장 높은 인터럽트 판별
- 빠른 응답을 요구하는 장치에 더 높은 우선순위 할당
- 운영체제나 소프트웨어에서 우선순위를 동적으로 변경하거나 설정 가능
- 요청 플래그를 순차적으로 비교하기 때문에 판단 속도가 느림
- 간단하고 융통성있는 방식
1. **하드웨어적인 방식**
- [ ]  데이지 체인(Daisy Chain)
- 인터럽트를 발생시키는 모든 장치를 하나의 직렬 회선으로 연결
- 각 장치가 우선순위를 갖으며, 우선순위가 높은 장치를 상위에 배치
- [ ]  병렬 우선순위 부여 방식
- 인터럽트를 발생시키는 모든 장치를 하나의 직렬 회선으로 연결
- 각 장치는 우선순위를 판별하기 위한 Mark Register를 가짐
- 각 register의 bit 설정을 통해 우선순위 지정
- 우선순위가 높은 장치는 Mark Register에 해당 bit를 설정한 상태로 인터럽트 발생
- 우선순위가 낮은 장치는 해당 bit를 비활성화
- 빠른 처리 속도가 장점이나 회로가 복잡함

### 예상질문

1. 인터럽트에 대해서 설명해주세요

컴퓨터 시스템에서 문제가 생겼을 때 현재 실행중인 프로그램을 잠시 중단하고 CPU에 다른 작업을 수행하도록 요청 하는 것입니다. 인터럽트는 컴퓨터 시스템의 효율성을 향상시키고 다중 작업을 처리할 수 있게 해줍니다.

1. 인터럽트의 유형에 대해서 설명해주세요

인터럽트는 크게 하드웨어 인터럽트와 소프트웨어 인터럽트로 나뉩니다. 하드웨어 인터럽트는 외부 장치나 입출력 장치의 요청 등으로 발생하고, 소프트웨어 인터럽트는 예외상황이나 시스템 호출 등으로 인해 발생합니다.

1. 인터럽트가 발생했을 때 처리과정에 대해서 설명해주세요

인터럽트가 발생하면 현재 실행 중인 프로그램은 중단되고 우선순위에 따라 인터럽트 서비스 루틴으로 이동합니다. 이후 인터럽트 서비스 루틴이 처리를 완료하면 중단된 프로그램의 실행을 재개합니다.

[3. 인터럽트 (Interrupt)](https://justzino.tistory.com/4)

[[운영체제] 인터럽트 Interrupt](https://yaelimeee.tistory.com/48)

[[컴퓨터구조] 인터럽트(Interrupt)란?](https://whatisthenext.tistory.com/147)
